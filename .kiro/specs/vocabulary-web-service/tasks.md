# 実装計画

- [x] 1. プロジェクト初期設定とSupabase環境構築
  - Node.js + Express.js APIサーバーのプロジェクト構造を作成
  - React + TypeScript フロントエンドプロジェクトを初期化
  - Supabaseプロジェクトを作成し、データベーススキーマを定義
  - 環境変数設定とSupabaseクライアント接続を実装
  - _要件: 5.1, 6.1_

- [x] 2. データベーススキーマとモデル実装
- [x] 2.1 Supabaseデータベーステーブル作成
  - vocabulary, japanese_meanings, study_sessions, daily_statsテーブルを作成
  - 適切なインデックスとRow Level Security (RLS)ポリシーを設定
  - _要件: 1.1, 1.2_

- [x] 2.2 TypeScript型定義とデータモデル実装
  - Vocabulary, JapaneseMeaning, StudySession, DailyStats インターフェースを定義
  - データベース操作用のリポジトリクラスを実装
  - バリデーション関数を作成
  - _要件: 1.1, 5.4_

- [x] 3. 認証システム実装
- [x] 3.1 Supabase Auth統合
  - ユーザー登録・ログイン・ログアウト機能を実装
  - JWT トークン検証ミドルウェアを作成
  - 認証エラーハンドリングを実装
  - _要件: 5.1, 5.3_

- [x] 3.2 フロントエンド認証フック実装
  - useAuth カスタムフックを作成
  - 認証状態管理とルート保護を実装
  - ログイン・登録フォームコンポーネントを作成
  - _要件: 5.1_

- [x] 4. 単語管理API実装
- [x] 4.1 単語CRUD API エンドポイント作成
  - GET /api/vocabulary (一覧取得・検索・フィルタリング)
  - POST /api/vocabulary (単語作成・複数日本語訳対応)
  - PUT /api/vocabulary/:id (単語更新)
  - DELETE /api/vocabulary/:id (単語削除)
  - _要件: 1.1, 1.2, 1.3, 1.4, 4.1, 4.2, 5.1, 5.2_

- [x] 4.2 単語検索・フィルタリング機能実装
  - 英単語・日本語訳での部分一致検索を実装
  - 学習状態（未学習・学習中・習得済み）でのフィルタリング
  - 追加日でのソート機能を実装
  - _要件: 4.1, 4.2, 4.3_

- [x] 5. フロントエンド単語管理UI実装
- [x] 5.1 単語一覧・検索コンポーネント作成
  - VocabularyList, SearchFilter コンポーネントを実装
  - 検索・フィルタリング・ソート機能のUI
  - ページネーション対応
  - _要件: 1.2, 4.1, 4.2, 4.3, 6.1, 6.2_

- [x] 5.2 単語登録・編集フォーム実装
  - VocabularyForm コンポーネントを作成
  - 複数日本語訳の動的追加・削除機能
  - バリデーション付きフォーム実装
  - _要件: 1.1, 1.3, 6.1, 6.2_

- [-] 6. フラッシュカード学習機能実装
- [x] 6.1 学習セッションAPI実装
  - GET /api/study/session (学習用単語取得)
  - POST /api/study/result (学習結果記録)
  - 学習履歴の保存とmastery_level更新ロジック
  - _要件: 2.1, 2.3, 2.4_

- [-] 6.2 フラッシュカードUI実装
  - FlashCard, StudySession コンポーネントを作成
  - 英単語表示→答え表示→理解度選択のフロー実装
  - タッチ・スワイプ操作対応（モバイル）
  - _要件: 2.1, 2.2, 2.3, 6.2, 6.3_

- [ ] 6.3 学習結果表示機能実装
  - StudyResults コンポーネントを作成
  - 学習した単語数・正解率の表示
  - 学習セッション完了時の統計表示
  - _要件: 2.4_

- [ ] 7. ダッシュボード・統計機能実装
- [ ] 7.1 統計データAPI実装
  - GET /api/dashboard/stats (総単語数・学習済み単語数・今日の学習数)
  - GET /api/dashboard/progress (過去7日間の学習履歴)
  - daily_stats テーブルの集計処理実装
  - _要件: 3.1, 3.2_

- [ ] 7.2 ダッシュボードUI実装
  - Dashboard, StatsSummary コンポーネントを作成
  - 学習統計の表示（総単語数、学習進捗など）
  - 連続学習日数の達成バッジ表示機能
  - _要件: 3.1, 3.3_

- [ ] 7.3 学習進捗グラフ実装
  - ProgressChart コンポーネントを作成
  - 過去7日間の学習履歴をChart.jsでグラフ表示
  - レスポンシブ対応のグラフ描画
  - _要件: 3.2, 6.1_

- [ ] 8. レスポンシブデザイン実装
- [ ] 8.1 モバイル対応レイアウト実装
  - Tailwind CSSでブレークポイント別スタイリング
  - モバイル最適化ナビゲーション（ハンバーガーメニュー）
  - タッチ操作に適したボタンサイズ・間隔調整
  - _要件: 6.1, 6.2, 6.3_

- [ ] 8.2 タブレット・PC対応レイアウト調整
  - 画面サイズに応じたグリッドレイアウト最適化
  - サイドバーナビゲーション（大画面用）
  - マルチカラムレイアウトの実装
  - _要件: 6.1_

- [ ] 9. エラーハンドリングとバリデーション強化
- [ ] 9.1 フロントエンドエラー処理実装
  - ErrorBoundary コンポーネントを作成
  - API エラーハンドリング（401, 403, 500エラー対応）
  - ユーザーフレンドリーなエラーメッセージ表示
  - _要件: 5.4_

- [ ] 9.2 バックエンドエラー処理・バリデーション強化
  - グローバルエラーハンドラーミドルウェア実装
  - 入力値バリデーション（joi使用）
  - セキュリティ対策（レート制限、CORS設定）
  - _要件: 5.4_

- [ ] 10. テスト実装
- [ ] 10.1 フロントエンドテスト作成
  - React Testing Library でコンポーネントテスト
  - カスタムフック（useVocabulary, useAuth）のテスト
  - フラッシュカード学習フローのE2Eテスト
  - _要件: 1.1, 1.2, 2.1, 2.2, 2.3_

- [ ] 10.2 バックエンドAPIテスト作成
  - Jest + Supertest でAPIエンドポイントテスト
  - 認証・認可のテストケース
  - データベース操作のテスト（テスト用Supabaseプロジェクト使用）
  - _要件: 5.1, 5.2, 5.3, 5.4_

- [ ] 11. パフォーマンス最適化
- [ ] 11.1 フロントエンド最適化実装
  - React.memo, useMemo, useCallback でレンダリング最適化
  - 仮想スクロール（大量単語リスト対応）
  - 画像遅延読み込み実装
  - _要件: 1.2, 4.1_

- [ ] 11.2 バックエンド・データベース最適化
  - データベースクエリ最適化とインデックス調整
  - APIレスポンスキャッシュ実装
  - ページネーション機能の実装
  - _要件: 4.1, 4.2, 5.2_

- [ ] 12. Renderデプロイ設定
- [ ] 12.1 本番環境設定
  - render.yaml 設定ファイル作成
  - 環境変数設定（Supabase接続情報）
  - HTTPS・セキュリティヘッダー設定
  - _要件: 5.1, 6.1_

- [ ] 12.2 CI/CDパイプライン構築
  - GitHub Actions でテスト自動実行
  - Render自動デプロイ設定
  - 本番環境での動作確認テスト
  - _要件: 5.4_